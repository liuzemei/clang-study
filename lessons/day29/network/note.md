

## 网络
网络:
协议/规则/规定
```
TCP/IP 协议
TCP 协议
IP 协议
....
组合在一起,就是网络通讯协议 -> 简称 TCP/IP 协议(蔟)

ARP RARP IP UDP TCP HTTP FTP 以太网帧协议 不同的组 分别形成了相互依赖的不同的加工车间

```
### TCP IP 协议的分层
- 应用层
- 传输层
- ip层
- 链路层
- 物理层

#### 1. 物理层
定义了硬件接口的规则. 电气规则
- 网卡接口的尺寸
- 网线
- TTL A/D -> D/A ---------> TTL A/D D/A
- 数字信号 -> 模拟信号 --------> 模拟信号 -> 数字信号

#### 2. 链路层
##### 1. 定义了网帧的规则. 
机器A -> 机器B
一个单位的构成 : 一个网帧
- 目标地址: MAC地址
- 源地址: MAC地址 6个字节
- 类型: 2字节
- 数据: 46-1500
- CRC: 校验


#### 3. 网络层
##### 1. 分用
- 根据以太网头部中的帧类型进行分用 确定传递给 IP/ARP/RARP (IP)
- 根据 IP 报文的协议进行分用 确定传输给 ICMP/IGMP/TCP/UDP (TCP)



##### 2. IP 报文(网络层)
- 版本(4)
- 首部长度(4)
- 服务类型(TOC)
- 总长度(16)

- 标识(16)
- 标志(3)
- 片偏移(13)

- TTL(8位)
- 协议(8): 决定把处理完后的包传递给 ICMP/IGMP/TCP/UDP
- 首部检验(16)

- 源IP地址(32)

- 目的IP地址(32)

##### 3. TCP 报文(传输层)
- 源端口(16)
- 目的端口(16)

- 序号(32)

- 确认号(32)

- 数据偏移(4)
- 保留(6)
- URG(1)
- ACK(1)
- PSH(1)
- RST(1)
- SYN(1)
- FIN(1)
- 窗口(16)

- 检验和(16)
- 紧急指针(16)

- 可选项(8的整数倍)


#### IP地址的构成
网段 + 主机
192.168.1.121

子网掩码
255.255.255.0

-> 做按位与运算
网络号: 192.168.1.0
主机号: 121 
>  (主机号不能是全0(0) 也不能是全1(255))
> 0 代表的是网络号 255 代表的是广播地址

192.168.1.130/25
前边是IP地址:  192.168.1.130
后边表示子网掩码, 前25位是全1: 255.255.255.128
网络号: 192.168.1.128 

192.168.1.121/25
千遍是IP地址:  192.168.1.121
后边表示子网掩码, 前25位全是1: 255.255.255.128
网络号: 192.168.1.0

所以上边两个ip不是在一个网段内

路由表会使用到网络号
- 路由是跨网段的

#### 三种设备
- 集线器
> 电信号 放大 分流
> 物理层电流(电信号)的交换
> 口之间不能交互
> 也称之为一层交换

- 交换机
> a -> b 通过网帧
> 
> 也称之为二层交换

1. 路由表: 查网络号
2. arp表: 查目标网口的Mac地址
3. 向目标网口的Mac地址发送数据
